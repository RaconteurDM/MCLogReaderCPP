\hypertarget{class_generic_schema_document}{}\doxysection{Generic\+Schema\+Document$<$ ValueT, Allocator $>$ Class Template Reference}
\label{class_generic_schema_document}\index{GenericSchemaDocument$<$ ValueT, Allocator $>$@{GenericSchemaDocument$<$ ValueT, Allocator $>$}}


JSON schema document.  




{\ttfamily \#include $<$schema.\+h$>$}

\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_generic_schema_document_ae246f1b6573a5a8a2c0d73d4eb64d53a}\label{class_generic_schema_document_ae246f1b6573a5a8a2c0d73d4eb64d53a}} 
typedef ValueT {\bfseries Value\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_aa53ca323efce50f88aea6fa0d03e9785}\label{class_generic_schema_document_aa53ca323efce50f88aea6fa0d03e9785}} 
typedef \mbox{\hyperlink{class_i_generic_remote_schema_document_provider}{IGeneric\+Remote\+Schema\+Document\+Provider}}$<$ \mbox{\hyperlink{class_generic_schema_document}{Generic\+Schema\+Document}} $>$ {\bfseries IRemote\+Schema\+Document\+Provider\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_ac0d88adf8c86917d8bc9563ffdab6a6d}\label{class_generic_schema_document_ac0d88adf8c86917d8bc9563ffdab6a6d}} 
typedef \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} {\bfseries Allocator\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_ad0293c28c9ffe80ab1f8ec86efee35c8}\label{class_generic_schema_document_ad0293c28c9ffe80ab1f8ec86efee35c8}} 
typedef Value\+Type\+::\+Encoding\+Type {\bfseries Encoding\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_ab1dec56a78b29649eb8e4b85b101ec7c}\label{class_generic_schema_document_ab1dec56a78b29649eb8e4b85b101ec7c}} 
typedef Encoding\+Type\+::\+Ch {\bfseries Ch}
\item 
\mbox{\Hypertarget{class_generic_schema_document_acaf115202b159a2eb72c97c3dc6c3895}\label{class_generic_schema_document_acaf115202b159a2eb72c97c3dc6c3895}} 
typedef \mbox{\hyperlink{classinternal_1_1_schema}{internal\+::\+Schema}}$<$ \mbox{\hyperlink{class_generic_schema_document}{Generic\+Schema\+Document}} $>$ {\bfseries Schema\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_aeb62f562d4dc024402b00f97cbcef747}\label{class_generic_schema_document_aeb62f562d4dc024402b00f97cbcef747}} 
typedef \mbox{\hyperlink{class_generic_pointer}{Generic\+Pointer}}$<$ Value\+Type, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} $>$ {\bfseries Pointer\+Type}
\item 
\mbox{\Hypertarget{class_generic_schema_document_ac55577f35a29a26af5b182dedb7ddb67}\label{class_generic_schema_document_ac55577f35a29a26af5b182dedb7ddb67}} 
typedef \mbox{\hyperlink{class_generic_value}{Generic\+Value}}$<$ Encoding\+Type, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} $>$ {\bfseries URIType}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_generic_schema_document_ae7982734214b1db916c8c60e711bba1e}{Generic\+Schema\+Document}} (const Value\+Type \&document, const Ch $\ast$uri=0, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{Size\+Type}} uri\+Length=0, \mbox{\hyperlink{class_i_generic_remote_schema_document_provider}{IRemote\+Schema\+Document\+Provider\+Type}} $\ast$remote\+Provider=0, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} $\ast$allocator=0)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_generic_schema_document_a6a54dfd1aec0f560f7e47e08f3fcb8f1}\label{class_generic_schema_document_a6a54dfd1aec0f560f7e47e08f3fcb8f1}} 
\mbox{\hyperlink{class_generic_schema_document_a6a54dfd1aec0f560f7e47e08f3fcb8f1}{$\sim$\+Generic\+Schema\+Document}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_generic_schema_document_af9520cfd7dcff50a878bf0f4e7f49e19}\label{class_generic_schema_document_af9520cfd7dcff50a878bf0f4e7f49e19}} 
const \mbox{\hyperlink{class_generic_value}{URIType}} \& {\bfseries Get\+URI} () const
\item 
\mbox{\Hypertarget{class_generic_schema_document_a3b86ad6eab393014cc5b3c52da5c4bc2}\label{class_generic_schema_document_a3b86ad6eab393014cc5b3c52da5c4bc2}} 
const \mbox{\hyperlink{classinternal_1_1_schema}{Schema\+Type}} \& \mbox{\hyperlink{class_generic_schema_document_a3b86ad6eab393014cc5b3c52da5c4bc2}{Get\+Root}} () const
\begin{DoxyCompactList}\small\item\em Get the root schema. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_generic_schema_document_a706511849688d9245fc37109f02a03c4}\label{class_generic_schema_document_a706511849688d9245fc37109f02a03c4}} 
class {\bfseries internal\+::\+Schema$<$ Generic\+Schema\+Document $>$}
\item 
\mbox{\Hypertarget{class_generic_schema_document_afcc03e6ba8f1a819e1a028c31ad38347}\label{class_generic_schema_document_afcc03e6ba8f1a819e1a028c31ad38347}} 
{\footnotesize template$<$typename , typename , typename $>$ }\\class {\bfseries Generic\+Schema\+Validator}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename ValueT, typename Allocator = Crt\+Allocator$>$\newline
class Generic\+Schema\+Document$<$ Value\+T, Allocator $>$}

JSON schema document. 

A JSON schema document is a compiled version of a JSON schema. It is basically a tree of \mbox{\hyperlink{classinternal_1_1_schema}{internal\+::\+Schema}}.

\begin{DoxyNote}{Note}
This is an immutable class (i.\+e. its instance cannot be modified after construction). 
\end{DoxyNote}

\begin{DoxyTemplParams}{Template Parameters}
{\em ValueT} & Type of JSON value (e.\+g. {\ttfamily Value} ), which also determine the encoding. \\
\hline
{\em Allocator} & Allocator type for allocating memory of this document. \\
\hline
\end{DoxyTemplParams}


Definition at line 1580 of file schema.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_generic_schema_document_ae7982734214b1db916c8c60e711bba1e}\label{class_generic_schema_document_ae7982734214b1db916c8c60e711bba1e}} 
\index{GenericSchemaDocument$<$ ValueT, Allocator $>$@{GenericSchemaDocument$<$ ValueT, Allocator $>$}!GenericSchemaDocument@{GenericSchemaDocument}}
\index{GenericSchemaDocument@{GenericSchemaDocument}!GenericSchemaDocument$<$ ValueT, Allocator $>$@{GenericSchemaDocument$<$ ValueT, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{GenericSchemaDocument()}{GenericSchemaDocument()}}
{\footnotesize\ttfamily template$<$typename ValueT , typename Allocator  = Crt\+Allocator$>$ \\
\mbox{\hyperlink{class_generic_schema_document}{Generic\+Schema\+Document}}$<$ ValueT, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} $>$\+::\mbox{\hyperlink{class_generic_schema_document}{Generic\+Schema\+Document}} (\begin{DoxyParamCaption}\item[{const Value\+Type \&}]{document,  }\item[{const Ch $\ast$}]{uri = {\ttfamily 0},  }\item[{\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{Size\+Type}}}]{uri\+Length = {\ttfamily 0},  }\item[{\mbox{\hyperlink{class_i_generic_remote_schema_document_provider}{IRemote\+Schema\+Document\+Provider\+Type}} $\ast$}]{remote\+Provider = {\ttfamily 0},  }\item[{\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}} $\ast$}]{allocator = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Constructor. 

Compile a JSON document into schema document.


\begin{DoxyParams}{Parameters}
{\em document} & A JSON document as source. \\
\hline
{\em uri} & The base URI of this schema document for purposes of violation reporting. \\
\hline
{\em uri\+Length} & Length of {\ttfamily name}, in code points. \\
\hline
{\em remote\+Provider} & An optional remote schema document provider for resolving remote reference. Can be null. \\
\hline
{\em allocator} & An optional allocator instance for allocating memory. Can be null. \\
\hline
\end{DoxyParams}


Definition at line 1604 of file schema.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{1605                                                                                          :}
\DoxyCodeLine{1606         remoteProvider\_(remoteProvider),}
\DoxyCodeLine{1607         allocator\_(allocator),}
\DoxyCodeLine{1608         ownAllocator\_(),}
\DoxyCodeLine{1609         root\_(),}
\DoxyCodeLine{1610         typeless\_(),}
\DoxyCodeLine{1611         schemaMap\_(allocator, kInitialSchemaMapSize),}
\DoxyCodeLine{1612         schemaRef\_(allocator, kInitialSchemaRefSize)}
\DoxyCodeLine{1613     \{}
\DoxyCodeLine{1614         \textcolor{keywordflow}{if} (!allocator\_)}
\DoxyCodeLine{1615             ownAllocator\_ = allocator\_ = \mbox{\hyperlink{rapidjson_8h_abdc7cd7902748ffe6626d71c59a73c3b}{RAPIDJSON\_NEW}}(\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}})();}
\DoxyCodeLine{1616 }
\DoxyCodeLine{1617         Ch noUri[1] = \{0\};}
\DoxyCodeLine{1618         uri\_.SetString(uri ? uri : noUri, uriLength, *allocator\_);}
\DoxyCodeLine{1619 }
\DoxyCodeLine{1620         typeless\_ = \textcolor{keyword}{static\_cast<}SchemaType*\textcolor{keyword}{>}(allocator\_-\/>Malloc(\textcolor{keyword}{sizeof}(SchemaType)));}
\DoxyCodeLine{1621         \textcolor{keyword}{new} (typeless\_) SchemaType(\textcolor{keyword}{this}, PointerType(), ValueType(\mbox{\hyperlink{rapidjson_8h_a1d1cfd8ffb84e947f82999c682b666a7a146f46700e905e8df96a6a90b5c7640f}{kObjectType}}).Move(), ValueType(\mbox{\hyperlink{rapidjson_8h_a1d1cfd8ffb84e947f82999c682b666a7a146f46700e905e8df96a6a90b5c7640f}{kObjectType}}).Move(), allocator\_);}
\DoxyCodeLine{1622 }
\DoxyCodeLine{1623         \textcolor{comment}{// Generate root schema, it will call CreateSchema() to create sub-\/schemas,}}
\DoxyCodeLine{1624         \textcolor{comment}{// And call AddRefSchema() if there are \$ref.}}
\DoxyCodeLine{1625         CreateSchemaRecursive(\&root\_, PointerType(), document, document);}
\DoxyCodeLine{1626 }
\DoxyCodeLine{1627         \textcolor{comment}{// Resolve \$ref}}
\DoxyCodeLine{1628         \textcolor{keywordflow}{while} (!schemaRef\_.Empty()) \{}
\DoxyCodeLine{1629             SchemaRefEntry* refEntry = schemaRef\_.template Pop<SchemaRefEntry>(1);}
\DoxyCodeLine{1630             \textcolor{keywordflow}{if} (\textcolor{keyword}{const} SchemaType* s = GetSchema(refEntry-\/>target)) \{}
\DoxyCodeLine{1631                 \textcolor{keywordflow}{if} (refEntry-\/>schema)}
\DoxyCodeLine{1632                     *refEntry-\/>schema = s;}
\DoxyCodeLine{1633 }
\DoxyCodeLine{1634                 \textcolor{comment}{// Create entry in map if not exist}}
\DoxyCodeLine{1635                 \textcolor{keywordflow}{if} (!GetSchema(refEntry-\/>source)) \{}
\DoxyCodeLine{1636                     \textcolor{keyword}{new} (schemaMap\_.template Push<SchemaEntry>()) SchemaEntry(refEntry-\/>source, \textcolor{keyword}{const\_cast<}SchemaType*\textcolor{keyword}{>}(s), \textcolor{keyword}{false}, allocator\_);}
\DoxyCodeLine{1637                 \}}
\DoxyCodeLine{1638             \}}
\DoxyCodeLine{1639             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (refEntry-\/>schema)}
\DoxyCodeLine{1640                 *refEntry-\/>schema = typeless\_;}
\DoxyCodeLine{1641 }
\DoxyCodeLine{1642             refEntry-\/>\string~SchemaRefEntry();}
\DoxyCodeLine{1643         \}}
\DoxyCodeLine{1644 }
\DoxyCodeLine{1645         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(root\_ != 0);}
\DoxyCodeLine{1646 }
\DoxyCodeLine{1647         schemaRef\_.ShrinkToFit(); \textcolor{comment}{// Deallocate all memory for ref}}
\DoxyCodeLine{1648     \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/rapidjson/fwd.\+h\item 
src/rapidjson/schema.\+h\end{DoxyCompactItemize}
